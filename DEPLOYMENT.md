# Deploying to Render

This guide covers deploying the Wemax app to [Render](https://render.com).

## Quick Start (Blueprint)

1. Push your code to GitHub.
2. Go to [Render Dashboard](https://dashboard.render.com) → **New** → **Blueprint**.
3. Connect your repository and select the repo.
4. Render will detect `render.yaml` and create both services.
5. Add required environment variables in the Dashboard for each service (see below).

## Services

| Service         | Type       | URL (example)                     |
|-----------------|------------|-----------------------------------|
| wemax-api       | Web Service| `https://wemax-api.onrender.com`  |
| wemax-frontend  | Static Site| `https://wemax-frontend.onrender.com` |

## Environment Variables

### Backend (wemax-api)

Set these in **Render Dashboard → wemax-api → Environment**:

| Variable                 | Required | Notes                                              |
|--------------------------|----------|----------------------------------------------------|
| `MONGO_URI`              | Yes      | MongoDB Atlas connection string                    |
| `JWT_SECRET`             | Yes      | Auto-generated by Blueprint; can override          |
| `CLIENT_URL`             | Yes      | `https://wemax-frontend.onrender.com`              |
| `CLOUDINARY_CLOUD_NAME`  | Yes      | Cloudinary cloud name                              |
| `CLOUDINARY_API_KEY`     | Yes      | Cloudinary API key                                 |
| `CLOUDINARY_API_SECRET`  | Yes      | Cloudinary API secret                              |
| `GOOGLE_CLIENT_ID`       | Yes      | For Google OAuth                                   |
| `GOOGLE_CLIENT_SECRET`   | Yes      | For Google OAuth                                   |

Add other variables from `Back-End/.env.example` as needed (Africa's Talking, Email, etc.).

### Frontend (wemax-frontend)

| Variable       | Required | Notes                                   |
|----------------|----------|-----------------------------------------|
| `VITE_API_URL` | Yes      | `https://wemax-api.onrender.com/api`    |

## Deployment Order

1. Deploy the **backend** first.
2. Copy the backend URL (e.g. `https://wemax-api.onrender.com`).
3. In backend env, set `CLIENT_URL` to the frontend URL (you can use the Render default before first deploy).
4. Deploy the **frontend**.
5. Set `VITE_API_URL` in frontend to `https://wemax-api.onrender.com/api`.
6. Redeploy the frontend so it picks up the new env var.

## Free Tier Notes

- Free web services spin down after ~15 minutes of inactivity; first request may be slow.
- Redeploy on code changes; auto-deploy is enabled by default from your default branch.
